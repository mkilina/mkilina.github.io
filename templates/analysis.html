{% extends 'base.html' %}
{% block title %}Анализ текста{% endblock %}

{% block links %}
<link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/">
<link href="../static/css/bootstrap.css" rel="stylesheet">
<link href="../static/css/sticky-footer-navbar.css" rel="stylesheet">
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js'></script>
{% endblock %}

{% block content %}
<main role="main" class="container">
<div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
  <div class="row">
    <div class="col-lg-3">
      <h4>Общая информация</h4>
    </div>
    <div class="col-lg-9">
      <h4>Анализ академичности текста</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-3" style="overflow-x: auto">
      <table class="table table-striped">
        <tbody>
          <tr>
            <th scope="row">Название</th>
            <td>{{ filename }}</td>
          </tr>
          <tr>
            <th scope="row">Всего слов</th>
            <td>6 000</td>
          </tr>
          <tr>
            <th scope="row">Уникальных слов</th>
            <td>3 200</td>
          </tr>
          <tr>
            <th scope="row">Удобочитаемость</th>
            <td>{{ FRE }}</td>
          </tr>
          <tr>
            <th scope="row">Еще цифра</th>
            <td>100500</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-lg-9">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link active" data-toggle="tab" href="#graphics">Визуализация</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#readability">Удобочитаемость</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#morph">Отредактировать свой текст</a>
        </li>
      </ul>

      <div class="tab-content">
        <div class="tab-pane active" id="graphics">
          <a class="col-lg-8 col-md-10">График удобочитаемости<br></a>
          <canvas id="chart" class="col-xl-10 col-lg-12 col-md-12"></canvas>
            <script>
              var barData = {
                labels : [
                  {% for item in labels %}
                  "{{ item }}",
                  {% endfor %}],

                datasets : [{
                  fillColor: [
                  {% for item in colors %}
                  "{{ item }}",
                  {% endfor %}],
                  strokeColor: "rgba(151,187,205,1)",
                  pointColor: "rgba(151,187,205,1)",
                  data : [
                    {% for item in values %}
                      "{{ item }}",
                      {% endfor %}
                  ]
                }]
              }

              // get bar chart canvas
              var mychart = document.getElementById("chart").getContext("2d");

                steps = 10
                max = {{max}}

              // draw bar chart
              new Chart(mychart).Bar(barData, {
                scaleOverride: true,
                scaleSteps: steps,
                scaleStepWidth: Math.ceil(max / steps),
                scaleStartValue: 30,
                scaleShowVerticalLines: true,
                scaleShowGridLines : true,
                barShowStroke : true,
                scaleShowLabels: true
                }
              );

            </script>
          
        
        </div>
        <div class="tab-pane" id="morph">
          Морфологические ошибки
        </div>
      </div>
    </div>
  </div>
</div>
</main>
<footer class="footer">
  <div class="container custom-footer">
    <span class="text-muted">
      <img class="cat-image" src="../static/img/cat8.jpg" />
    </span>
  </div>
</footer>

{% endblock %}